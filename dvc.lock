schema: '2.0'
stages:
  ingest:
    cmd: python pipelines/ingest_pipeline.py
    deps:
    - path: data/raw/ml-100k/u.data
      hash: md5
      md5: 6e47046882bad158b0efbb84cd5cb987
      size: 1979173
    - path: data/raw/ml-100k/u.item
      hash: md5
      md5: c9e7f390115d79079537301d5204f3f7
      size: 236344
    - path: data/raw/ml-100k/u.user
      hash: md5
      md5: 1b53539edc13caad0282c8500608a319
      size: 22628
    - path: pipelines/ingest_pipeline.py
      hash: md5
      md5: 5e69c773c28c4b9f966d3a15cecd9845
      size: 1841
    - path: src/ingest_strategy.py
      hash: md5
      md5: d34c1f3e4ef24c09d49291ba5f251213
      size: 1868
    - path: steps/ingest_data.py
      hash: md5
      md5: 02241dfb5e7d2bac261506f8165fd30b
      size: 1028
    params:
      params.yaml:
        ingest.base_path: data/raw/ml-100k
        ingest.processed_dir: data/processed
    outs:
    - path: data/processed
      hash: md5
      md5: c16c70f99fa5b1787df915ea91d27afb.dir
      size: 2342551
      nfiles: 3
  process_ratings:
    cmd: python pipelines/ratings_pipeline.py
    deps:
    - path: data/processed/ratings.csv
      hash: md5
      md5: 26763292aa76168d3e41e33bfc594e7d
      size: 2079207
    - path: pipelines/ratings_pipeline.py
      hash: md5
      md5: 260bd2cfe2b4f14fea5a5f8fc159c5f5
      size: 1500
    - path: steps/prepare_data.py
      hash: md5
      md5: a2caaf350ef7bb23d3dff9666026f98d
      size: 2890
    params:
      params.yaml:
        process_ratings.file_path: data/processed/ratings.csv
        process_ratings.out_dir: feature_repo/data/ratings
        process_ratings.target_col: rating
        process_ratings.test_size: 0.2
        process_ratings.timestamp_col: timestamp
    outs:
    - path: feature_repo/data/ratings
      hash: md5
      md5: e295c9f3351ee7bacb6f19950b6badd8.dir
      size: 472530
      nfiles: 4
  process_movies:
    cmd: python pipelines/movies_pipeline.py
    deps:
    - path: data/processed/movies.csv
      hash: md5
      md5: a98e850fd903b42c47a8f5e6651a88de
      size: 239733
    - path: pipelines/movies_pipeline.py
      hash: md5
      md5: 208dc68b0568995289d2a8db52b6ba97
      size: 1241
    - path: steps/prepare_data.py
      hash: md5
      md5: a2caaf350ef7bb23d3dff9666026f98d
      size: 2890
    params:
      params.yaml:
        process_movies.date_col: release_date
        process_movies.file_path: data/processed/movies.csv
        process_movies.max_features: 1000
        process_movies.out_dir: feature_repo/data/movies
        process_movies.vectorize_col: title
    outs:
    - path: feature_repo/data/movies
      hash: md5
      md5: cb51b9087ba2c4f2dbb7993f6ad88d42.dir
      size: 97799
      nfiles: 1
  process_users:
    cmd: python pipelines/users_pipeline.py
    deps:
    - path: data/processed/users.csv
      hash: md5
      md5: 0074e4d3e53891d1b6288f7dd7c68edc
      size: 23611
    - path: pipelines/users_pipeline.py
      hash: md5
      md5: b4d452f04c172ecea97514975add8761
      size: 807
    - path: steps/prepare_data.py
      hash: md5
      md5: a2caaf350ef7bb23d3dff9666026f98d
      size: 2890
    params:
      params.yaml:
        process_users.enc_cols:
        - gender
        - occupation
        process_users.file_path: data/processed/users.csv
        process_users.out_dir: feature_repo/data/users
    outs:
    - path: feature_repo/data/users
      hash: md5
      md5: ea8c0ff486fd14caaf47ceec136c1b17.dir
      size: 33721
      nfiles: 1
