schema: '2.0'
stages:
  ingest:
    cmd: python pipelines/ingest_pipeline.py
    deps:
    - path: data/raw/ml-100k/u.data
      hash: md5
      md5: 6e47046882bad158b0efbb84cd5cb987
      size: 1979173
    - path: data/raw/ml-100k/u.item
      hash: md5
      md5: c9e7f390115d79079537301d5204f3f7
      size: 236344
    - path: data/raw/ml-100k/u.user
      hash: md5
      md5: 1b53539edc13caad0282c8500608a319
      size: 22628
    - path: pipelines/ingest_pipeline.py
      hash: md5
      md5: b56c18c06617bab7f541ccd74a2607e8
      size: 1788
    - path: src/ingest_strategy.py
      hash: md5
      md5: 5ad652acedbe06a9d016afa7201e7cc7
      size: 1820
    - path: steps/ingest_data.py
      hash: md5
      md5: 391065f6fda3dca71df44bd6217ff1a7
      size: 992
    params:
      params.yaml:
        ingest.base_path: data/raw/ml-100k
        ingest.processed_dir: data/processed
    outs:
    - path: data/processed
      hash: md5
      md5: c4cd683f670cf1c0d88cda46cd1a5eb9.dir
      size: 2239923
      nfiles: 3
  process_ratings:
    cmd: python pipelines/ratings_pipeline.py
    deps:
    - path: data/processed/ratings.csv
      hash: md5
      md5: ad3c6cf0bc7d2e9d40d33a64366258f0
      size: 1979206
    - path: pipelines/ratings_pipeline.py
      hash: md5
      md5: 105304c7aec446daac15d652a0f0a203
      size: 1636
    - path: steps/prepare_data.py
      hash: md5
      md5: f411c1db7b753895966aaafb30d4329f
      size: 2821
    params:
      params.yaml:
        process_ratings.file_path: data/processed/ratings.csv
        process_ratings.out_dir: feature_repo/data/ratings
        process_ratings.target_col: rating
        process_ratings.test_size: 0.2
        process_ratings.timestamp_col: timestamp
    outs:
    - path: feature_repo/data/ratings
      hash: md5
      md5: d298edfcc16c1c906117c5db88680abe.dir
      size: 992059
      nfiles: 4
  process_movies:
    cmd: python pipelines/movies_pipeline.py
    deps:
    - path: data/processed/movies.csv
      hash: md5
      md5: b90af40d0a885d001df74b8b2d764436
      size: 238050
    - path: pipelines/movies_pipeline.py
      hash: md5
      md5: 50fee694d77991cfa4c96a1ea42263c6
      size: 1203
    - path: steps/prepare_data.py
      hash: md5
      md5: f411c1db7b753895966aaafb30d4329f
      size: 2821
    params:
      params.yaml:
        process_movies.date_col: release_date
        process_movies.file_path: data/processed/movies.csv
        process_movies.max_features: 1000
        process_movies.out_dir: feature_repo/data/movies
        process_movies.vectorize_col: title
    outs:
    - path: feature_repo/data/movies
      hash: md5
      md5: 9bae3ac5a24a214229dbd5be07f8222b.dir
      size: 102055
      nfiles: 1
  process_users:
    cmd: python pipelines/users_pipeline.py
    deps:
    - path: data/processed/users.csv
      hash: md5
      md5: 7a2b704cd2dca88a29d97790a923ff81
      size: 22667
    - path: pipelines/users_pipeline.py
      hash: md5
      md5: 26ccfcd84675c5b56f656b77e44f6c0f
      size: 908
    - path: steps/prepare_data.py
      hash: md5
      md5: f411c1db7b753895966aaafb30d4329f
      size: 2821
    params:
      params.yaml:
        process_users.enc_cols:
        - gender
        - occupation
        process_users.file_path: data/processed/users.csv
        process_users.out_dir: feature_repo/data/users
    outs:
    - path: feature_repo/data/users
      hash: md5
      md5: 8e2e7f6238a154d236fe41a116e8fb88.dir
      size: 34546
      nfiles: 1
