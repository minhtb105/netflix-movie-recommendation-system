schema: '2.0'
stages:
  ingest:
    cmd: python pipelines/ingest_pipeline.py
    deps:
    - path: data/raw/ml-100k/u.data
      hash: md5
      md5: 6e47046882bad158b0efbb84cd5cb987
      size: 1979173
    - path: data/raw/ml-100k/u.item
      hash: md5
      md5: c9e7f390115d79079537301d5204f3f7
      size: 236344
    - path: data/raw/ml-100k/u.user
      hash: md5
      md5: 1b53539edc13caad0282c8500608a319
      size: 22628
    - path: pipelines/ingest_pipeline.py
      hash: md5
      md5: 5e69c773c28c4b9f966d3a15cecd9845
      size: 1841
    - path: src/ingest_strategy.py
      hash: md5
      md5: d34c1f3e4ef24c09d49291ba5f251213
      size: 1868
    - path: steps/ingest_data.py
      hash: md5
      md5: 02241dfb5e7d2bac261506f8165fd30b
      size: 1028
    params:
      params.yaml:
        ingest.base_path: data/raw/ml-100k
        ingest.processed_dir: data/processed
    outs:
    - path: data/processed
      hash: md5
      md5: c16c70f99fa5b1787df915ea91d27afb.dir
      size: 2342551
      nfiles: 3
  process_ratings:
    cmd: python pipelines/ratings_pipeline.py
    deps:
    - path: data/processed/ratings.csv
      hash: md5
      md5: 26763292aa76168d3e41e33bfc594e7d
      size: 2079207
    - path: pipelines/ratings_pipeline.py
      hash: md5
      md5: 9a2e011a74e2d2e513f731e09f3a7cf5
      size: 1784
    - path: steps/prepare_data.py
      hash: md5
      md5: a2caaf350ef7bb23d3dff9666026f98d
      size: 2890
    params:
      params.yaml:
        process_ratings.file_path: data/processed/ratings.csv
        process_ratings.out_dir: feature_repo/data/ratings
        process_ratings.target_col: rating
        process_ratings.test_size: 0.2
        process_ratings.timestamp_col: timestamp
    outs:
    - path: feature_repo/data/ratings
      hash: md5
      md5: 12ee0e8001ce7ff8bcd558458e5cf5db.dir
      size: 993615
      nfiles: 4
  process_movies:
    cmd: python pipelines/movies_pipeline.py
    deps:
    - path: data/processed/movies.csv
      hash: md5
      md5: a98e850fd903b42c47a8f5e6651a88de
      size: 239733
    - path: pipelines/movies_pipeline.py
      hash: md5
      md5: 78d74c5015c443911380d2c994d5b639
      size: 1242
    - path: steps/prepare_data.py
      hash: md5
      md5: a2caaf350ef7bb23d3dff9666026f98d
      size: 2890
    params:
      params.yaml:
        process_movies.date_col: release_date
        process_movies.file_path: data/processed/movies.csv
        process_movies.max_features: 1000
        process_movies.out_dir: feature_repo/data/movies
        process_movies.vectorize_col: title
    outs:
    - path: feature_repo/data/movies
      hash: md5
      md5: 71c10fec5bdcc0dcfc515e39c15a1be0.dir
      size: 101999
      nfiles: 1
  process_users:
    cmd: python pipelines/users_pipeline.py
    deps:
    - path: data/processed/users.csv
      hash: md5
      md5: 0074e4d3e53891d1b6288f7dd7c68edc
      size: 23611
    - path: pipelines/users_pipeline.py
      hash: md5
      md5: b78a6a73e14f9495b1f40000f6942cdc
      size: 935
    - path: steps/prepare_data.py
      hash: md5
      md5: a2caaf350ef7bb23d3dff9666026f98d
      size: 2890
    params:
      params.yaml:
        process_users.enc_cols:
        - gender
        - occupation
        process_users.file_path: data/processed/users.csv
        process_users.out_dir: feature_repo/data/users
    outs:
    - path: feature_repo/data/users
      hash: md5
      md5: 6976fa13b1a4928c4dd5cd1c168aa8f2.dir
      size: 34546
      nfiles: 1
